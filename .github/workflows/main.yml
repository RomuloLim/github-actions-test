name: CI

on:
  pull_request:
    branches:
      - main
    types: [ closed ]
    
  workflow_dispatch:
jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3

      - name: Run a one-line script
        run: echo Hello, world!
        
      - name: Run a multi-line script
        run: |
          echo Add other actions to build,
          echo test, and deploy your project.
          

  createPullRequest:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          ref: main
              
      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: Add report file
          title: '[Example] Add report file'
          base: main
          body: >
            This PR is auto-generated by 
            [create-pull-request](https://github.com/peter-evans/create-pull-request).
          labels: report, automated pr

#   updatebranches:
#     name: Update branches
#     runs-on: [ubuntu-latest]
#     needs: [build]
#     if: github.event.pull_request.merged == true
#     steps:  
#       - uses: actions/checkout@v3
#       - name: Make changes to pull request
#         run: date +%s > report.txt
      
#       - name: Raise PR
#         id: demo-1
#         uses: peter-evans/create-pull-request@v4
#         with:
#           token: ${{ secrets.ACTION_SECRET }}
#           commit-message: Update Homol with Main
#           committer: Github <noreply@github.com>
#           author: ${{ github.actor }} <${{ github.actor }}@users.noreply.com>
#           signoff: false
#           branch: homol
#           title: 'Auto update Homol <- Main'
#           body: |
#             Update HOMOL with MAIN
#             - Automatic PR creation
#           delete-branch: false
#           labels: |
#             beta
#             automated pr
#           assignees: RomuloLim
#           reviewers: RomuloLim
#           milestone: 1
#           draft: false
          
          
#       - name: Approve PR
#         uses: juliangruber/approve-pull-request-action@v1
#         with:
#           github-token: ${{ secrets.ACTION_SECRET }}
#           number: ${{ steps.demo-1.outputs.pull-request-number }}

#       - name: Merge PR
#         uses: juliangruber/merge-pull-request-action@v1
#         with:
#           github-token: ${{ secrets.ACTION_SECRET }}
#           number: ${{ steps.demo-1.outputs.pull-request-number }}
#           method: squash
